{"ast":null,"code":"import _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _initializerDefineProperty from \"@babel/runtime-corejs2/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime-corejs2/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime-corejs2/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _temp;\n\nimport { observable, action, computed } from \"mobx\";\nimport * as helpers from \"./Helpers\";\n\nconst axios = require(\"axios\");\n\nexport let TasksManager = (_class = (_temp = class TasksManager {\n  constructor() {\n    _initializerDefineProperty(this, \"tasks\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"details\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"addTask\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"deleteTask\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"addDetail\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"updateDetail\", _descriptor6, this);\n\n    _initializerDefineProperty(this, \"deleteDetail\", _descriptor7, this);\n  }\n\n  async getTasks() {\n    try {\n      const resiveData = await axios.get(`http://localhost:9000/Data`);\n      console.log(resiveData);\n      this.tasks = helpers.creatTasks(resiveData.data.tasks);\n      console.log(this.tasks);\n      this.details = helpers.creatDetails(resiveData.data.details);\n    } catch (err) {\n      return helpers.erorHandler(err);\n    }\n  }\n\n  get tasksSum() {\n    return this.tasks.length;\n  }\n\n  get detailDoneSum() {\n    const detailDoneSum = this.details.filter(d => d.isDone == true);\n    return detailDoneSum.length;\n  }\n\n  get detailOpenSum() {\n    const detailOpenSum = this.details.filter(d => d.isDone == false);\n    return detailOpenSum.length;\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"tasks\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"details\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"getTasks\", [action], _Object$getOwnPropertyDescriptor(_class.prototype, \"getTasks\"), _class.prototype), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"addTask\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async task => {\n      try {\n        debugger;\n        const newTask = await axios.post(`http://localhost:9000/Task`, task);\n        this.tasks.push(helpers.creatTasks(newTask.data));\n        return \"The task was created successfully\";\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"deleteTask\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async taskId => {\n      try {\n        const resiveData = await axios.delete(`http://localhost:6000/Task/${taskId}`);\n\n        if (resiveData.data.tasks.length < 0) {\n          this.tasks = [];\n        } else {\n          this.tasks = helpers.creatTasks(resiveData.data.tasks);\n        }\n\n        if (resiveData.data.detail < 0) {\n          this.details = [];\n        } else {\n          this.details = helpers.creatDetails(resiveData.data.detail);\n        }\n\n        return \"The task was deleted successfully\";\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"addDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detail => {\n      try {\n        const newDetail = await axios.post(`http://localhost:6000/Detail`, detail);\n        this.details.push(helpers.creatDetails(newDetail.data));\n        return \"The detail was created successfully\";\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"updateDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detailId => {\n      try {\n        const resiveData = await axios.put(`http://localhost:6000/Detail/${detailId}`);\n        const task = this.tasks.find(t => t.id == resiveData.data.task._id);\n        const detail = this.details.find(d => d.id == resiveData.data.detail._id);\n        task.isDone = resiveData.data.task.lastUpdate;\n        detail.isDone = resiveData.data.detail.isDone;\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"deleteDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detailId => {\n      try {\n        const resiveData = await axios.delete(`http://localhost:6000/Detail/${detailId}`);\n        const detailIndex = this.details.findIndex(d => d.id == resiveData.data);\n        this.details.splice(detailIndex, 1);\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"tasksSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"tasksSum\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"detailDoneSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"detailDoneSum\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"detailOpenSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"detailOpenSum\"), _class.prototype)), _class);","map":{"version":3,"sources":["C:/Users/David/Downloads/home/ReactNotesList-NextJs/stores/TasksManager.js"],"names":["observable","action","computed","helpers","axios","require","TasksManager","getTasks","resiveData","get","console","log","tasks","creatTasks","data","details","creatDetails","err","erorHandler","tasksSum","length","detailDoneSum","filter","d","isDone","detailOpenSum","task","newTask","post","push","taskId","delete","detail","newDetail","detailId","put","find","t","id","_id","lastUpdate","detailIndex","findIndex","splice"],"mappings":"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","sourcesContent":["import { observable, action, computed } from \"mobx\";\r\nimport * as helpers from \"./Helpers\";\r\nconst axios = require(\"axios\");\r\n\r\nexport class TasksManager {\r\n  @observable  tasks=[];\r\n  @observable details =[];\r\n\r\n  @action async getTasks  () {\r\n    \r\n    try {\r\n\r\n      const resiveData = await axios.get(`http://localhost:9000/Data`);\r\n      console.log(resiveData)\r\n      this.tasks = helpers.creatTasks(resiveData.data.tasks);\r\n      console.log(this.tasks)\r\n      this.details = helpers.creatDetails(resiveData.data.details);\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action addTask = async (task) => {\r\n    \r\n    try {\r\n      debugger\r\n      const newTask = await axios.post(`http://localhost:9000/Task`, task);\r\n      this.tasks.push(helpers.creatTasks(newTask.data));\r\n      return \"The task was created successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action deleteTask = async (taskId) => {\r\n    \r\n    try {\r\n      const resiveData = await axios.delete(\r\n        `http://localhost:6000/Task/${taskId}`\r\n      );\r\n      if (resiveData.data.tasks.length<0) {\r\n        this.tasks = [];\r\n      } else {\r\n        this.tasks = helpers.creatTasks(resiveData.data.tasks);\r\n      }\r\n      if (resiveData.data.detail<0) {\r\n        this.details = [];\r\n      } else {\r\n        this.details = helpers.creatDetails(resiveData.data.detail);\r\n      }\r\n\r\n      return \"The task was deleted successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action addDetail = async (detail) => {\r\n    \r\n    try {\r\n      const newDetail = await axios.post(`http://localhost:6000/Detail`, detail);\r\n      \r\n      this.details.push(helpers.creatDetails(newDetail.data));\r\n      return \"The detail was created successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action updateDetail = async (detailId) => {\r\n    \r\n    try {\r\n      const resiveData =await  axios.put(`http://localhost:6000/Detail/${detailId}`);\r\n      const task = this.tasks.find((t) => t.id == resiveData.data.task._id);\r\n      const detail = this.details.find(\r\n        (d) => d.id == resiveData.data.detail._id\r\n      );\r\n      task.isDone = resiveData.data.task.lastUpdate;\r\n      detail.isDone = resiveData.data.detail.isDone;\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action deleteDetail = async (detailId) => {\r\n  \r\n    try {\r\n      const resiveData =await axios.delete(\r\n        `http://localhost:6000/Detail/${detailId}`\r\n      );\r\n      const detailIndex = this.details.findIndex(\r\n        (d) => d.id == resiveData.data\r\n      );\r\n      this.details.splice(detailIndex, 1);\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @computed get tasksSum() {\r\n    return this.tasks.length;\r\n  }\r\n  @computed get detailDoneSum() {\r\n    const detailDoneSum = this.details.filter((d) => d.isDone == true);\r\n    return detailDoneSum.length;\r\n  }\r\n  @computed get detailOpenSum() {\r\n    const detailOpenSum = this.details.filter((d) => d.isDone == false);\r\n    return detailOpenSum.length;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}