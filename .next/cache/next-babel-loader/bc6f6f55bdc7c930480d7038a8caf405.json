{"ast":null,"code":"import _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _initializerDefineProperty from \"@babel/runtime-corejs2/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime-corejs2/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime-corejs2/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _temp;\n\nimport { observable, action, computed } from \"mobx\";\nimport * as helpers from \"./Helpers\";\n\nconst axios = require(\"axios\");\n\nexport let TasksManager = (_class = (_temp = class TasksManager {\n  constructor() {\n    _initializerDefineProperty(this, \"tasks\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"details\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"addDetail\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"updateDetail\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"deleteDetail\", _descriptor5, this);\n  }\n\n  async getTasks() {\n    try {\n      const resiveData = await axios.get(`http://localhost:9000/Data`);\n      console.log(resiveData);\n      this.tasks = helpers.creatTasks(resiveData.data.tasks);\n      console.log(this.tasks);\n      this.details = helpers.creatDetails(resiveData.data.details);\n    } catch (err) {\n      return helpers.erorHandler(err);\n    }\n  }\n\n  async addTask(task) {\n    try {\n      debugger;\n      const newTask = await axios.post(`http://localhost:9000/Task`, task);\n      this.tasks.push(helpers.creatTasks(newTask.data));\n      return \"The task was created successfully\";\n    } catch (err) {\n      return helpers.erorHandler(err);\n    }\n  }\n\n  async deleteTask(taskId) {\n    try {\n      const resiveData = await axios.delete(`http://localhost:9000/Task/${taskId}`);\n\n      if (resiveData.data.tasks.length < 0) {\n        this.tasks = [];\n      } else {\n        this.tasks = helpers.creatTasks(resiveData.data.tasks);\n      }\n\n      if (resiveData.data.detail < 0) {\n        this.details = [];\n      } else {\n        this.details = helpers.creatDetails(resiveData.data.detail);\n      }\n\n      return \"The task was deleted successfully\";\n    } catch (err) {\n      return helpers.erorHandler(err);\n    }\n  }\n\n  get tasksSum() {\n    return this.tasks.length;\n  }\n\n  get detailDoneSum() {\n    const detailDoneSum = this.details.filter(d => d.isDone == true);\n    return detailDoneSum.length;\n  }\n\n  get detailOpenSum() {\n    const detailOpenSum = this.details.filter(d => d.isDone == false);\n    return detailOpenSum.length;\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"tasks\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"details\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"getTasks\", [action], _Object$getOwnPropertyDescriptor(_class.prototype, \"getTasks\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"addTask\", [action], _Object$getOwnPropertyDescriptor(_class.prototype, \"addTask\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"deleteTask\", [action], _Object$getOwnPropertyDescriptor(_class.prototype, \"deleteTask\"), _class.prototype), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"addDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detail => {\n      try {\n        const newDetail = await axios.post(`http://localhost:9000/Detail`, detail);\n        this.details.push(helpers.creatDetails(newDetail.data));\n        return \"The detail was created successfully\";\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"updateDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detailId => {\n      try {\n        const resiveData = await axios.put(`http://localhost:9000/Detail/${detailId}`);\n        const task = this.tasks.find(t => t.id == resiveData.data.task._id);\n        const detail = this.details.find(d => d.id == resiveData.data.detail._id);\n        task.isDone = resiveData.data.task.lastUpdate;\n        detail.isDone = resiveData.data.detail.isDone;\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"deleteDetail\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async detailId => {\n      try {\n        const resiveData = await axios.delete(`http://localhost:6000/Detail/${detailId}`);\n        const detailIndex = this.details.findIndex(d => d.id == resiveData.data);\n        this.details.splice(detailIndex, 1);\n      } catch (err) {\n        return helpers.erorHandler(err);\n      }\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"tasksSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"tasksSum\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"detailDoneSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"detailDoneSum\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"detailOpenSum\", [computed], _Object$getOwnPropertyDescriptor(_class.prototype, \"detailOpenSum\"), _class.prototype)), _class);","map":{"version":3,"sources":["C:/Users/David/Desktop/next.js Todo/stores/TasksManager.js"],"names":["observable","action","computed","helpers","axios","require","TasksManager","getTasks","resiveData","get","console","log","tasks","creatTasks","data","details","creatDetails","err","erorHandler","addTask","task","newTask","post","push","deleteTask","taskId","delete","length","detail","tasksSum","detailDoneSum","filter","d","isDone","detailOpenSum","newDetail","detailId","put","find","t","id","_id","lastUpdate","detailIndex","findIndex","splice"],"mappings":"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","sourcesContent":["import { observable, action, computed } from \"mobx\";\r\nimport * as helpers from \"./Helpers\";\r\nconst axios = require(\"axios\");\r\n\r\nexport class TasksManager {\r\n  @observable  tasks=[];\r\n  @observable details =[];\r\n\r\n  @action async getTasks  () {\r\n    \r\n    try {\r\n\r\n      const resiveData = await axios.get(`http://localhost:9000/Data`);\r\n      console.log(resiveData)\r\n      this.tasks = helpers.creatTasks(resiveData.data.tasks);\r\n      console.log(this.tasks)\r\n      this.details = helpers.creatDetails(resiveData.data.details);\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action async addTask  (task)  {\r\n    \r\n    try {\r\n      debugger\r\n      const newTask = await axios.post(`http://localhost:9000/Task`, task);\r\n      this.tasks.push(helpers.creatTasks(newTask.data));\r\n      return \"The task was created successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action async deleteTask  (taskId) {\r\n    \r\n    try {\r\n      const resiveData = await axios.delete(\r\n        `http://localhost:9000/Task/${taskId}`\r\n      );\r\n      if (resiveData.data.tasks.length<0) {\r\n        this.tasks = [];\r\n      } else {\r\n        this.tasks = helpers.creatTasks(resiveData.data.tasks);\r\n      }\r\n      if (resiveData.data.detail<0) {\r\n        this.details = [];\r\n      } else {\r\n        this.details = helpers.creatDetails(resiveData.data.detail);\r\n      }\r\n\r\n      return \"The task was deleted successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action addDetail = async (detail) => {\r\n    \r\n    try {\r\n      const newDetail = await axios.post(`http://localhost:9000/Detail`, detail);\r\n      \r\n      this.details.push(helpers.creatDetails(newDetail.data));\r\n      return \"The detail was created successfully\";\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action updateDetail = async (detailId) => {\r\n    \r\n    try {\r\n      const resiveData =await  axios.put(`http://localhost:9000/Detail/${detailId}`);\r\n      const task = this.tasks.find((t) => t.id == resiveData.data.task._id);\r\n      const detail = this.details.find(\r\n        (d) => d.id == resiveData.data.detail._id\r\n      );\r\n      task.isDone = resiveData.data.task.lastUpdate;\r\n      detail.isDone = resiveData.data.detail.isDone;\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @action deleteDetail = async (detailId) => {\r\n  \r\n    try {\r\n      const resiveData =await axios.delete(\r\n        `http://localhost:6000/Detail/${detailId}`\r\n      );\r\n      const detailIndex = this.details.findIndex(\r\n        (d) => d.id == resiveData.data\r\n      );\r\n      this.details.splice(detailIndex, 1);\r\n    } catch (err) {\r\n      return helpers.erorHandler(err);\r\n    }\r\n  };\r\n\r\n  @computed get tasksSum() {\r\n    return this.tasks.length;\r\n  }\r\n  @computed get detailDoneSum() {\r\n    const detailDoneSum = this.details.filter((d) => d.isDone == true);\r\n    return detailDoneSum.length;\r\n  }\r\n  @computed get detailOpenSum() {\r\n    const detailOpenSum = this.details.filter((d) => d.isDone == false);\r\n    return detailOpenSum.length;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}